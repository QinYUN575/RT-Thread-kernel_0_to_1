# 从零到一实现 RT-Thread 内核

---

## 裸机系统与多线程系统

### 裸机系统

裸机系统通常分为轮询系统和前后台系统。

#### 轮询系统

**轮询系统**：即系统中需要处理的事务为顺序执行。

存在的问题：

- 只适合顺序执行的代码，当有外部事件驱动时，实时性就会降低。

#### 前后台系统

**前后台系统**：即在轮询系统的基础上加入中断；外部事件的响应在中断里面完成，事件的处理还是回到轮询系统中完成。

中断我们这里称之为前台，main 函数中的无限循环函我们称之为后台；

中断服务函数中标记事件，确保事件不会丢失，再加上中断可嵌套的功能，大大的提高了程序的实时响应能力；

在大多数中小型项目中，前后台系统运用的好，堪称有操作系统的效果；

### 多线程系统


相比于前后台系统，多线程系统的事件响应也是在中断中完成的，但是事件的处理是在线程中完成的。

在多线程系统中，线程和中断一样也具有优先级，优先级高的线程会被先执行。但一个紧急的事件在中断被标记之后，如果事件对应的优先级足够高，那么对应的事件会马上得到响应；

相比于前后台系统，多线程系统的实时性又被提高了；


轮询、前后台和多线程系统软件模型的区别

| 模型 | 事件响应 | 事件处理 | 特点 |
| --- | --- | --- | --- |
| 轮询系统 | 主程序 | 主程序 | 轮询响应事件、轮询处理事件 |
| 前后台系统 | 中断 | 主函数 | 实时响应事件、轮询处理事件 |
| 多线程系统 | 中断 | 主程序 | 实时响应事件、实时处理事件 |


---
